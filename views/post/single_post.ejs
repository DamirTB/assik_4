<!-- posts.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List of Posts</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <%- include('../navbar_log.ejs') %>
    <div class="container">
        <h1> <%= post.title %> </h1>
        <p> <%= post.content %> </p>
        <h2> by <%= post.author %> </h2>
        <form action="/post/<%= post.post_id %>" method="post">
            <label for="name">Write a comment </label>
            <input type="text" id="content" name="content" class="form-group form-control" required /><br />
            <button type="submit" class="btn btn-primary">Create</button>
        </form>
        <h2>Comments:</h2>
        <% if (comments.rows.length > 0) { %>
            <% comments.rows.forEach(comment => { %>
                <div class="shadow-lg p-5 my-5 rounded">
                    <h3><%= comment.author %></h3>
                    <p> <%= comment.content %> </p>
                </div>
            <% }); %>
        <% } else { %>
            <p>No comments yet.</p>
        <% } %>
    </div>
</body>
</html>
